include required("/stdlib/jdk/24/openjdk.conf")
include required("https://raw.githubusercontent.com/hydraulic-software/conveyor/master/configs/jvm/extract-native-libraries.conf")

app {
  fsname = vaadin-conveyor
  display-name = "Vaadin Conveyor POC"
  rdns-name = "dev.nathanlively.vaadin-conveyor"
  version = 1.0.0
  vcs-url = "https://github.com/LiveNathan/vaadin-conveyor"

  compression-level = low
  inputs += "target/vaadin-conveyor-1.0-SNAPSHOT.jar"

  site {
    github {
      oauth-token = ${env.GITHUB_TOKEN}
      pages-branch = "gh-pages"
    }
  }

  jvm {
    gui = "org.springframework.boot.loader.launch.JarLauncher"
    options += "-Xmx512m"
    options += "-Dserver.port=0"
    modules += jdk.zipfs
    modules += java.management
    modules += java.management.rmi
    modules += java.naming
    modules += java.sql
    modules += java.security.jgss
    modules += java.desktop
    modules += java.instrument
    modules += java.compiler
    modules += jdk.unsupported
  }

  machines = [ "mac", "windows.amd64", "linux.amd64.glibc", "linux.aarch64.glibc" ]
}

conveyor.compatibility-level = 19